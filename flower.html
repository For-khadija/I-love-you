<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: #000;
            color: #fff;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        
        #container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #scene-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± */
        #waiting-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.8s ease;
        }
        
        #waiting-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .waiting-content {
            text-align: center;
            max-width: 500px;
            padding: 30px;
        }
        
        .waiting-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }
        
        .waiting-text {
            font-size: 2.5rem;
            color: #fff;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        .arabic-waiting {
            font-size: 1.8rem;
            color: #ff6699;
            font-style: italic;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .loading-dots {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 10px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            background: #ff3366;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }
        
        .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #message {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            animation: fadeIn 2s ease-out;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            padding: 15px 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 102, 153, 0.3);
            max-width: 90%;
        }
        
        .message-text {
            color: #ffccdd;
            font-size: 1.3rem;
            line-height: 1.5;
            text-shadow: 0 0 10px rgba(255, 204, 221, 0.5);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .config-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: #ff3366;
            border: 1px solid #ff3366;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            z-index: 20;
            opacity: 0.3;
            transition: opacity 0.3s;
        }
        
        .config-btn:hover {
            opacity: 1;
        }
        
        .config-panel {
            position: absolute;
            top: 50px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #ff3366;
            border-radius: 10px;
            padding: 20px;
            display: none;
            min-width: 300px;
            z-index: 20;
        }
        
        .config-panel.show {
            display: block;
        }
        
        .config-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #ff3366;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .config-btn-small {
            background: #ff3366;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .zoom-controls {
            position: absolute;
            bottom: 120px;
            right: 20px;
            z-index: 20;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .zoom-btn {
            background: rgba(0, 0, 0, 0.7);
            color: #ff3366;
            border: 1px solid #ff3366;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            user-select: none;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .zoom-btn:hover {
            opacity: 1;
        }
        
        .zoom-btn:active {
            background: rgba(255, 51, 102, 0.3);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.05); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .waiting-text {
                font-size: 2rem;
            }
            
            .arabic-waiting {
                font-size: 1.5rem;
            }
            
            .waiting-emoji {
                font-size: 3rem;
            }
            
            .message-text {
                font-size: 1.1rem;
                padding: 10px 20px;
            }
            
            #message {
                bottom: 20px;
                padding: 12px 25px;
            }
            
            .zoom-controls {
                bottom: 100px;
                right: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .waiting-text {
                font-size: 1.6rem;
            }
            
            .arabic-waiting {
                font-size: 1.2rem;
            }
            
            .waiting-emoji {
                font-size: 2.5rem;
            }
            
            .message-text {
                font-size: 1rem;
            }
            
            .zoom-controls {
                bottom: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± -->
    <div id="waiting-screen">
        <div class="waiting-content">
            <div class="waiting-emoji">ğŸ¤ğŸ«¶</div>
            <div class="waiting-text">Just wait ...</div>
            <div class="arabic-waiting">Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø±Ùƒ</div>
            <div class="loading-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div id="container">
        <div id="scene-container"></div>
        
        <!-- Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
        <div id="message">
            <div class="message-text">ØªÙˆØ­Ø´ØªÙƒ Ù‡Ù‡Ù‡Ù‡ Ø³Ù…Ø­ÙŠÙ„ÙŠ Ù…Ø¨Ø¹ØªÙ„ÙƒØ´ Ø§Ù„Ø¨Ø§Ø±Ø­</div>
        </div>
        
        <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="zoom-controls">
            <div class="zoom-btn" onclick="zoomIn()">+</div>
            <div class="zoom-btn" onclick="zoomOut()">âˆ’</div>
        </div>
        
        <button class="config-btn" onclick="toggleConfig()">âš™ï¸</button>
        <div class="config-panel" id="configPanel">
            <h3 style="color: #ff3366; margin-bottom: 15px;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆØ±Ø¯Ø©</h3>
            <p style="color: #ccc; margin-bottom: 5px;">Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ÙˆØ±Ø¯Ø© 3D:</p>
            <input type="text" id="modelPath" class="config-input" 
                   placeholder="Ù…Ø«Ø§Ù„: models/rose.glb" 
                   value="models/rose.glb">
            <button class="config-btn-small" onclick="loadModelFromPath()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ±Ø¯Ø©</button>
            
            <div style="margin-top: 20px; border-top: 1px solid #ff3366; padding-top: 15px;">
                <p style="color: #ccc; margin-bottom: 10px;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø²ÙˆÙ…:</p>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="config-btn-small" onclick="setZoomClose()">Ù‚Ø±ÙŠØ¨</button>
                    <button class="config-btn-small" onclick="setZoomDefault()">ÙˆØ³Ø·</button>
                    <button class="config-btn-small" onclick="setZoomFar()">Ø¨Ø¹ÙŠØ¯</button>
                </div>
            </div>
            
            <p style="margin-top: 15px; font-size: 0.8rem; color: #aaa;">
                Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ÙˆØ±Ø¯Ø© 3D Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¶Ø§ÙØ©
            </p>
        </div>
    </div>

    <script>
        // ============================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ - ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø±ÙØ¹
        // ============================================
        const CONFIG = {
            // Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„ÙˆØ±Ø¯Ø© 3D Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            DEFAULT_MODEL_PATH: 'models/rose.glb',
            
            // Ù„ÙˆÙ† Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
            LIGHT_COLOR: 0xff3366,
            
            // Ø³Ø±Ø¹Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Ù†
            ROTATION_SPEED: 0.0015,
            
            // Ø­Ø¬Ù… Ø§Ù„ÙˆØ±Ø¯Ø©
            MODEL_SCALE: 1.8,
            
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø²ÙˆÙ… ÙˆØ§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ - Ù…Ø¹ ØªØºÙŠÙŠØ± Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¤ÙŠØ©
            ZOOM_CLOSE: 2.0,    // Ù‚Ø±ÙŠØ¨
            ZOOM_DEFAULT: 3.5,  // Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø²Ø§ÙˆÙŠØ© Ø¹Ù„ÙˆÙŠØ© Ù…Ø§Ø¦Ù„Ø©)
            ZOOM_FAR: 5.0,      // Ø¨Ø¹ÙŠØ¯
            
            // Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø§Ø¦Ù„Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ù„Ø¬Ø§Ù†Ø¨)
            CAMERA_POSITION: {
                x: 1.5,   // Ø¬Ø§Ù†Ø¨ÙŠØ§Ù‹
                y: 1.8,   // Ù„Ù„Ø£Ø¹Ù„Ù‰
                z: 3.5    // Ù„Ù„Ø®Ù„Ù
            },
            
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
            CONTROLS: {
                minDistance: 1.5,
                maxDistance: 8.0,
                zoomSpeed: 1.0,
                rotateSpeed: 0.7
            }
        };
        // ============================================
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ø´Ù‡Ø¯
        let scene, camera, renderer, controls, roseModel;
        let isModelLoaded = false;
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´Ù‡Ø¯
        function init() {
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ù‡Ø¯
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø¹ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            
            // ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ø²Ø§ÙˆÙŠØ© Ù…Ø§Ø¦Ù„Ø© Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ù„Ø¬Ø§Ù†Ø¨
            camera.position.set(
                CONFIG.CAMERA_POSITION.x,
                CONFIG.CAMERA_POSITION.y,
                CONFIG.CAMERA_POSITION.z
            );
            
            // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù†Ø­Ùˆ Ø§Ù„ÙˆØ±Ø¯Ø©
            camera.lookAt(0, 0, 0);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ø§Ø±Ø¶
            renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                alpha: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('scene-container').appendChild(renderer.domElement);
            
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = true;
            controls.enablePan = false;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø²ÙˆÙ… ÙˆØ§Ù„ØªØ­ÙƒÙ…
            controls.minDistance = CONFIG.CONTROLS.minDistance;
            controls.maxDistance = CONFIG.CONTROLS.maxDistance;
            controls.maxPolarAngle = Math.PI * 0.8; // Ù…Ù†Ø¹ Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„
            controls.minPolarAngle = Math.PI * 0.2; // Ù…Ù†Ø¹ Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰
            
            // Ø­Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªØ­ÙƒÙ…
            controls.zoomSpeed = CONFIG.CONTROLS.zoomSpeed;
            controls.rotateSpeed = CONFIG.CONTROLS.rotateSpeed;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
            setupLighting();
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø©
            window.addEventListener('resize', onWindowResize);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„ØªØµÙŠÙŠØ±
            animate();
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ± Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            setTimeout(() => {
                loadModelFromPath();
            }, 2000);
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¶Ø§Ø¡Ø©
        function setupLighting() {
            // Ø¶ÙˆØ¡ Ù…Ø­ÙŠØ· Ù†Ø§Ø¹Ù…
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);
            
            // Ø¶ÙˆØ¡ Ø§ØªØ¬Ø§Ù‡ÙŠ Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù† Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§
            const mainLight = new THREE.DirectionalLight(0xffffff, 0.9);
            mainLight.position.set(2, 5, 3);
            mainLight.castShadow = true;
            mainLight.shadow.camera.left = -5;
            mainLight.shadow.camera.right = 5;
            mainLight.shadow.camera.top = 5;
            mainLight.shadow.camera.bottom = -5;
            scene.add(mainLight);
            
            // Ø¶ÙˆØ¡ Ù…Ù„ÙˆÙ† Ù„ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ±Ø¯Ø©
            const coloredLight = new THREE.PointLight(CONFIG.LIGHT_COLOR, 0.7, 20);
            coloredLight.position.set(0, 1, 2);
            scene.add(coloredLight);
            
            // Ø¶ÙˆØ¡ Ø®Ù„ÙÙŠ Ù„Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø­ÙˆØ§Ù
            const rimLight = new THREE.DirectionalLight(0xffaaff, 0.3);
            rimLight.position.set(-2, 1, -2);
            scene.add(rimLight);
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ±Ø¯Ø© Ù…Ù† Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù
        async function loadModelFromPath() {
            const modelPath = document.getElementById('modelPath').value || CONFIG.DEFAULT_MODEL_PATH;
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if (roseModel) {
                scene.remove(roseModel);
                roseModel = null;
            }
            
            try {
                // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ GLTF/GLB
                const loader = new THREE.GLTFLoader();
                
                const gltf = await new Promise((resolve, reject) => {
                    loader.load(
                        modelPath,
                        resolve,
                        undefined,
                        reject
                    );
                });
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø´Ù‡Ø¯
                roseModel = gltf.scene;
                
                // Ø¶Ø¨Ø· Ø­Ø¬Ù… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                const box = new THREE.Box3().setFromObject(roseModel);
                const center = box.getCenter(new THREE.Vector3());
                const size = box.getSize(new THREE.Vector3());
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = CONFIG.MODEL_SCALE / maxDim;
                
                roseModel.scale.setScalar(scale);
                roseModel.position.copy(center).multiplyScalar(-scale);
                
                // Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ÙˆØ±Ø¯Ø©
                roseModel.position.y = 0;
                
                // ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¸Ù„Ø§Ù„ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙˆØ§Ø¯
                roseModel.traverse((child) => {
                    if (child.isMesh) {
                        child.castShadow = true;
                        child.receiveShadow = true;
                        
                        // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
                        if (child.material) {
                            child.material.needsUpdate = true;
                            if (child.material.color) {
                                child.material.color.multiplyScalar(1.2);
                            }
                        }
                    }
                });
                
                scene.add(roseModel);
                isModelLoaded = true;
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                setTimeout(() => {
                    document.getElementById('waiting-screen').classList.add('hidden');
                }, 500);
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬:', error);
                
                // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ø¯Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                createDefaultRose();
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                setTimeout(() => {
                    document.getElementById('waiting-screen').classList.add('hidden');
                }, 500);
            }
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ø¯Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙˆÙØ± Ù…Ù„Ù
        function createDefaultRose() {
            const roseGroup = new THREE.Group();
            
            // Ù‚Ù„Ø¨ Ø§Ù„ÙˆØ±Ø¯Ø© (Ø£ØµÙØ±)
            const heartGeometry = new THREE.SphereGeometry(0.2, 20, 20);
            const heartMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffcc00,
                shininess: 100,
                emissive: 0xffcc00,
                emissiveIntensity: 0.2
            });
            const heart = new THREE.Mesh(heartGeometry, heartMaterial);
            heart.castShadow = true;
            roseGroup.add(heart);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ØªÙ„Ø§Øª Ø­Ù…Ø±Ø§Ø¡
            for (let i = 0; i < 14; i++) {
                const petal = createPetal();
                const angle = (i / 14) * Math.PI * 2;
                const radius = 0.7;
                
                petal.position.x = Math.cos(angle) * radius;
                petal.position.y = Math.sin(angle) * radius * 0.7;
                petal.position.z = Math.sin(angle) * 0.1;
                petal.rotation.z = angle;
                
                // ØªØ¨Ø§ÙŠÙ† ÙÙŠ Ø§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„Ù…ÙŠÙ„Ø§Ù† Ù„Ù„ÙˆØ§Ù‚Ø¹ÙŠØ©
                const scale = 0.8 + Math.random() * 0.3;
                petal.scale.set(scale, scale, scale);
                petal.rotation.x = Math.random() * 0.3 - 0.15;
                
                // Ù…ÙŠÙ„Ø§Ù† Ø·ÙÙŠÙ Ù„Ù„Ø®Ø§Ø±Ø¬
                petal.rotation.y = Math.random() * 0.1 - 0.05;
                
                roseGroup.add(petal);
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø¨ØªÙ„Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ø£ØµØºØ±
            for (let i = 0; i < 10; i++) {
                const petal = createPetal();
                const angle = (i / 10) * Math.PI * 2;
                const radius = 0.35;
                
                petal.position.x = Math.cos(angle) * radius;
                petal.position.y = Math.sin(angle) * radius * 0.7;
                petal.position.z = Math.sin(angle) * 0.05 + 0.1;
                petal.rotation.z = angle;
                petal.scale.set(0.5, 0.5, 0.5);
                
                roseGroup.add(petal);
            }
            
            // Ø§Ù„Ø³Ø§Ù‚ (Ø£Ø®Ø¶Ø±)
            const stemGeometry = new THREE.CylinderGeometry(0.035, 0.05, 2, 10);
            const stemMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2e8b57,
                shininess: 40
            });
            const stem = new THREE.Mesh(stemGeometry, stemMaterial);
            stem.position.y = -1.1;
            stem.castShadow = true;
            roseGroup.add(stem);
            
            // Ø£ÙˆØ±Ø§Ù‚ Ø®Ø¶Ø±Ø§Ø¡
            for (let i = 0; i < 3; i++) {
                const leaf = createLeaf();
                leaf.position.y = -0.7 + i * 0.4;
                leaf.position.x = 0.15 + i * 0.05;
                leaf.rotation.z = Math.PI / 4;
                roseGroup.add(leaf);
            }
            
            roseModel = roseGroup;
            scene.add(roseModel);
            isModelLoaded = true;
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ØªÙ„Ø© ÙˆØ§Ø­Ø¯Ø©
        function createPetal() {
            const shape = new THREE.Shape();
            
            // Ø´ÙƒÙ„ Ù‚Ù„Ø¨ Ù„Ù„Ø¨ØªÙ„Ø©
            shape.moveTo(0, 0);
            shape.bezierCurveTo(0.5, 0, 0.8, 0.5, 0.3, 1.1);
            shape.bezierCurveTo(0, 1.4, -0.3, 1.1, -0.8, 0.5);
            shape.bezierCurveTo(-0.5, 0, 0, 0, 0, 0);
            
            const extrudeSettings = {
                depth: 0.04,
                bevelEnabled: true,
                bevelSegments: 1,
                steps: 1,
                bevelSize: 0.015,
                bevelThickness: 0.015
            };
            
            const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
            
            // Ù…Ø§Ø¯Ø© Ø­Ù…Ø±Ø§Ø¡ Ù„Ø§Ù…Ø¹Ø© Ù„Ù„Ø¨ØªÙ„Ø©
            const material = new THREE.MeshPhongMaterial({
                color: CONFIG.LIGHT_COLOR,
                shininess: 80,
                specular: 0x333333,
                emissive: 0xff0044,
                emissiveIntensity: 0.1
            });
            
            const petal = new THREE.Mesh(geometry, material);
            petal.castShadow = true;
            petal.receiveShadow = true;
            
            return petal;
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ù‚Ø©
        function createLeaf() {
            const shape = new THREE.Shape();
            shape.moveTo(0, 0);
            shape.quadraticCurveTo(0.3, 0.1, 0.4, 0.3);
            shape.quadraticCurveTo(0.3, 0.5, 0, 0.6);
            shape.quadraticCurveTo(-0.3, 0.5, -0.4, 0.3);
            shape.quadraticCurveTo(-0.3, 0.1, 0, 0);
            
            const extrudeSettings = {
                depth: 0.02,
                bevelEnabled: true,
                bevelSegments: 1,
                steps: 1,
                bevelSize: 0.01,
                bevelThickness: 0.01
            };
            
            const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);
            const material = new THREE.MeshPhongMaterial({
                color: 0x32CD32,
                shininess: 30,
                side: THREE.DoubleSide
            });
            
            const leaf = new THREE.Mesh(geometry, material);
            leaf.castShadow = true;
            leaf.receiveShadow = true;
            
            return leaf;
        }
        
        // ================== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø²ÙˆÙ… ==================
        
        function zoomIn() {
            if (controls) {
                camera.position.z *= 0.85;
                if (camera.position.z < controls.minDistance) {
                    camera.position.z = controls.minDistance;
                }
                controls.update();
            }
        }
        
        function zoomOut() {
            if (controls) {
                camera.position.z *= 1.15;
                if (camera.position.z > controls.maxDistance) {
                    camera.position.z = controls.maxDistance;
                }
                controls.update();
            }
        }
        
        function setZoomClose() {
            if (controls && camera) {
                camera.position.set(1, 1.2, CONFIG.ZOOM_CLOSE);
                camera.lookAt(0, 0, 0);
                controls.update();
            }
        }
        
        function setZoomDefault() {
            if (controls && camera) {
                camera.position.set(
                    CONFIG.CAMERA_POSITION.x,
                    CONFIG.CAMERA_POSITION.y,
                    CONFIG.ZOOM_DEFAULT
                );
                camera.lookAt(0, 0, 0);
                controls.update();
            }
        }
        
        function setZoomFar() {
            if (controls && camera) {
                camera.position.set(0.5, 2.5, CONFIG.ZOOM_FAR);
                camera.lookAt(0, 0, 0);
                controls.update();
            }
        }
        
        function toggleConfig() {
            document.getElementById('configPanel').classList.toggle('show');
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // ØªØ¯ÙˆÙŠØ± Ø§Ù„ÙˆØ±Ø¯Ø© Ø¨Ø¨Ø·Ø¡ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
            if (roseModel && isModelLoaded) {
                roseModel.rotation.y += CONFIG.ROTATION_SPEED;
            }
            
            controls.update();
            renderer.render(scene, camera);
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', init);
        
        // Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener('click', (event) => {
            const configPanel = document.getElementById('configPanel');
            const configBtn = document.querySelector('.config-btn');
            
            if (!configPanel.contains(event.target) && !configBtn.contains(event.target)) {
                configPanel.classList.remove('show');
            }
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', (event) => {
            if (event.key === '+' || event.key === '=') {
                zoomIn();
                event.preventDefault();
            } else if (event.key === '-' || event.key === '_') {
                zoomOut();
                event.preventDefault();
            } else if (event.key === 'Escape') {
                document.getElementById('configPanel').classList.remove('show');
            }
        });
    </script>
</body>
</html>